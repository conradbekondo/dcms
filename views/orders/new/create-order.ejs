<%- include('partials/head.ejs') %>

    <body id="app-container" class="menu-default show-spinner">
        <%- include('../../partials/navbar.ejs') %>
            <%- include('../../partials/menu.ejs')%>
                <div class="modal fade" id="receiptModal">
                    <div class="modal-dialog modal-dialog-scrollable modal-dialog-vertically-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3 class="modal-title">Invoice Receipt - </h3>
                                <button type="button" class="close" data-dismiss="modal">
                          <span>&times;</span>
                        </button>
                            </div>
                            <div class="modal-body" id="printable-content">
                                <div class="row align-items-center">
                                    <div class="col-6">
                                        <div class="d-flex justify-content-start align-items-center">
                                            <div>
                                                <h3 class="font-weight-bold mb-2"><img class="d-inline" src="<%= data.config.logoUrl || ''%>">
                                                    <%= data.config.companyName %>
                                                </h3>
                                                <% if (data.config.contact) { %>
                                                    <% if (data.config.contact.phone && data.config.contact.phone != '') {%>
                                                        <p class="small p-0 m-0">Tel:
                                                            <%= data.config.contact.phone %>
                                                        </p>
                                                        <%}%>

                                                            <% if (data.config.contact.email && data.config.contact.email != '') {%>
                                                                <p class="small py-1 m-0">Tel:
                                                                    <%= data.config.contact.email %>
                                                                </p>
                                                                <%}%>
                                                                    <%}%>
                                                                        <% if (data.config.address && data.config.address != '') {%>
                                                                            <p class="small p-0 m-0">Address:
                                                                                <%= data.config.address %>
                                                                            </p>
                                                                            <%}%>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="">
                                            <table class="d-block w-100 small">
                                                <tbody class="d-block w-100">
                                                    <tr class="d-flex justify-content-between w-100">
                                                        <td>
                                                            <div>
                                                                <span class="d-block font-weight-bold">Invoice</span>
                                                                <span class="d-block" id="receiptInvoiceId">[Invoice_ID]</span>
                                                            </div>
                                                        </td>
                                                        <td class="text-right">
                                                            <div>
                                                                <span class="d-block font-weight-bold">Order</span>
                                                                <span class="d-block" id="receiptOrderId">[Order_ID]</span>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr class="d-flex justify-content-between w-100">
                                                        <td>
                                                            <div>
                                                                <!-- <span class="d-block font-weight-bold">Invoice Status</span> -->
                                                                <span class="d-block" id="receiptInvoiceStatus">[Invoice_Status]</span>
                                                            </div>
                                                        </td>
                                                        <td class="text-right">
                                                            <div>
                                                                <!-- <span class="d-block font-weight-bold">Order Status</span> -->
                                                                <span class="d-block" id="receiptOrderStatus">[Order_Status]</span>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr></tr>
                                                    <tr class="d-flex justify-content-between w-100">
                                                        <td>
                                                            <div>
                                                                <!-- <span class="d-block font-weight-bold">Date Printed</span> -->
                                                                <span class="d-block" id="receiptDatePrinted">[Date_Printed]</span>
                                                            </div>
                                                        </td>
                                                        <td class="text-right">
                                                            <div>
                                                                <!-- <span class="d-block font-weight-bold">Date Recorded</span> -->
                                                                <span class="d-block" id="receiptDateRecorded">[Date_Recorded]</span>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="row p-0 my-3">
                                    <div class="col-12 p-0 m-0">
                                        <table class="table-light table-condensed table table-bordered small">
                                            <thead>
                                                <tr>
                                                    <th>Item</th>
                                                    <th>Quantity</th>
                                                    <th>Standard Services</th>
                                                    <th>Additional Services</th>
                                                    <th>Processing Mode</th>
                                                    <th>Price</th>
                                                </tr>
                                            </thead>
                                            <tbody id="receiptInvoiceItems"></tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="5">
                                                        <div class="d-flex justify-content-end align-items-center">
                                                            <span>Total: </span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="d-flex justify-content-end align-items-center">
                                                            <span id="receiptFormComputedTotal" class="font-weight-bold">[Computed_Total]</span>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                                <div class="row p-0 my-3">
                                    <div class="col-12 p-0 m-0">
                                        <table class="d-block w-100 small">
                                            <tbody class="d-block w-100">
                                                <tr class="d-flex justify-content-between align-items-baseline">
                                                    <!-- <td></td> -->
                                                    <td>Client: </td>
                                                    <td id="receiptFormClientNames" class="font-weight-bold" style="font-size: 1rem">[Client_Names]</td>
                                                </tr>
                                                <tr class="d-flex justify-content-between align-items-baseline">
                                                    <!-- <td></td> -->
                                                    <td>Tax: </td>
                                                    <td id="receiptFormTaxAmount" class="font-weight-bold" style="font-size: 1rem">[Tax_Amount]</td>
                                                </tr>
                                                <tr class="d-flex justify-content-between align-items-baseline">
                                                    <!-- <td></td> -->
                                                    <td>Discount: </td>
                                                    <td id="receiptFormDiscount" class="font-weight-bold" style="font-size: 1rem">[Discount_Amount]</td>
                                                </tr>
                                                <tr class="d-flex justify-content-between align-items-baseline">
                                                    <!-- <td></td> -->
                                                    <td>Net Payable: </td>
                                                    <td id="receiptNetPayable" class="font-weight-bold" style="font-size: 1rem">[Net_Payable]</td>
                                                </tr>
                                                <tr class="d-flex justify-content-between align-items-baseline">
                                                    <!-- <td></td> -->
                                                    <td>Amount Paid: </td>
                                                    <td id="receiptFormAmountPaid" class="font-weight-bold" style="font-size: 1rem">[Amount_Paid]</td>
                                                </tr>
                                                <tr class="d-flex justify-content-between align-items-baseline">
                                                    <!-- <td></td> -->
                                                    <td id="receiptChangeLabel">Change: </td>
                                                    <td id="receiptOutstanding" class="font-weight-bold" style="font-size: 1rem">[Outstanding]</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="row small">
                                    <div class="col-12">
                                        <span class="d-block text-center">Powered by QuickDo</span>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer d-flex justify-content-center align-items-center">
                                <button type="button" id="print-receipt" class="btn btn-primary"><i class="fa-solid fa-print"></i> Print</button>
                                <button type="button" data-dismiss="modal" class="btn btn-outline-warning"><i class="fa-solid fa-times"></i> Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
                <form id="updateInvoiceForm">
                    <input type="hidden" id="orderIdInput">
                    <div class="modal fade" id="invoiceUpdateFormModal">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title">Invoice -
                                    </h4>
                                    <button type="reset" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span> </button>
                                </div>
                                <div class="modal-body">
                                    <dl>
                                        <dt>Client</dt>
                                        <dd>
                                            <h3>N/A</h3>
                                        </dd>
                                        <dt>Number of Services</dt>
                                        <dd>0</dd>
                                        <dt>Tax</dt>
                                        <dd>FCFA 0</dd>
                                        <dt>Discount</dt>
                                        <dd>FCFA 0</dd>
                                        <dt>Total</dt>
                                        <dd>FCFA 0</dd>
                                        <dt>Net Payable</dt>
                                        <dd>FCFA 0</dd>
                                    </dl>
                                    <div class="form-group">
                                        <label id="lblmarkAsDelivered" for="markDelivered"><input id="markDelivered" type="checkbox"> Mark as Delivered</label>
                                    </div>
                                    <div class="form-group p-0 mb-2">
                                        <label for="updateInvoiceDueDate">Due Date <span class="text-danger">*</span></label>
                                        <input type="date" id="updateInvoiceDueDate" placeholder="Due Date" required class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label for="updateInvoiceFormPaymentType">Payment Type <span class="text-danger">*</span></label>
                                        <select value="cash" required id="updateInvoiceFormPaymentType" name="paymentType" class="form-control">
                              <option selected="true" value="cash">Cash</option>
                              <option value="mobile">Momo</option>
                              <option value="bank">Bank Transfer</option>
                            </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="updateInvoiceFormAmountPaid">Amount Paid <span class="text-danger">*</span></label>
                                        <div class="d-block my-2">
                                            <div class="d-flex money-btns justify-content-around gap-3 flex-wrap">
                                                <button type="button" class="btn-sm btn btn-outline-primary">+ 500</button>
                                                <button type="button" class="btn-sm btn btn-outline-primary">+ 1000</button>
                                                <button type="button" class="btn-sm btn btn-outline-primary">+ 2000</button>
                                                <button type="button" class="btn-sm btn btn-outline-primary">+ 5000</button>
                                                <button type="button" class="btn-sm btn btn-outline-primary">+ 10000</button>
                                            </div>
                                        </div>
                                        <input required type="number" id="updateInvoiceFormAmountPaid" class="form-control" min="0" value="0">
                                        <div class="d-block my-2">
                                            <div class="d-flex money-btns justify-content-around gap-3 flex-wrap">
                                                <button type="button" class="btn-sm btn btn-outline-danger">- 500</button>
                                                <button type="button" class="btn-sm btn btn-outline-danger">- 1000</button>
                                                <button type="button" class="btn-sm btn btn-outline-danger">- 2000</button>
                                                <button type="button" class="btn-sm btn btn-outline-danger">- 5000</button>
                                                <button type="button" class="btn-sm btn btn-outline-danger">- 10000</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <dl class="font-weight-bold text-bold">
                                            <dt style="font-size: 1.2rem">Balance: </dt>
                                            <dd id="updateInvoiceFormBalanceText" style="font-weight: bold;font-size: 2rem">FCFA 0</dd>
                                            <dd id="updateInvoiceFormBalanceDescription"></dd>
                                        </dl>
                                    </div>
                                </div>
                                <div class="modal-footer d-flex justify-content-center align-items-center">
                                    <button id="updateInvoicePrintBtn" class="btn btn-print btn-success" type="submit"><i class="fa-solid fa-print"></i> Print</button>
                                    <button class="btn btn-primary" type="submit"><i class="fa-solid fa-save"></i> Save</button>
                                    <button data-dismiss="modal" class="btn btn-outline-danger" type="reset"><i class="fa-solid fa-cancel"></i> Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <form id="invoiceForm" method="post">
                    <div class="modal fade" id="invoiceModal" role="dialog">
                        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title">Invoice -
                                        <%= data.nextInvoiceId %>
                                    </h4>
                                    <button type="reset" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span> </button>
                                </div>
                                <div class="modal-body">
                                    <dl>
                                        <dt>Client</dt>
                                        <dd>
                                            <h3>N/A</h3>
                                        </dd>
                                        <dt>Number of Services</dt>
                                        <dd>0</dd>
                                        <dt>Tax</dt>
                                        <dd>FCFA 0</dd>
                                        <dt>Discount</dt>
                                        <dd>FCFA 0</dd>
                                        <dt>Total</dt>
                                        <dd>FCFA 0</dd>
                                        <dt>Net Payable</dt>
                                        <dd>FCFA 0</dd>
                                    </dl>
                                    <div class="form-group p-0 mb-2">
                                        <label for="dueDate">Due Date <span class="text-danger">*</span></label>
                                        <input type="date" id="dueDate" placeholder="Due Date" required class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label for="invoiceFormPaymentType">Payment Type <span class="text-danger">*</span></label>
                                        <select value="cash" required id="invoiceFormPaymentType" name="paymentType" class="form-control">
                              <option selected="true" value="cash">Cash</option>
                              <option value="mobile">Momo</option>
                              <option value="bank">Bank Transfer</option>
                            </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="invoiceFormAmountPaid">Amount Paid <span class="text-danger">*</span></label>
                                        <div class="d-block my-2">
                                            <div class="d-flex money-btns justify-content-around gap-3 flex-wrap">
                                                <button type="button" class="btn-sm btn btn-outline-primary">500</button>
                                                <button type="button" class="btn-sm btn btn-outline-primary">1000</button>
                                                <button type="button" class="btn-sm btn btn-outline-primary">2000</button>
                                                <button type="button" class="btn-sm btn btn-outline-primary">5000</button>
                                                <button type="button" class="btn-sm btn btn-outline-primary">10000</button>
                                            </div>
                                        </div>
                                        <input required type="number" id="invoiceFormAmountPaid" class="form-control" min="0" value="0">
                                        <div class="d-block my-2">
                                            <div class="d-flex money-btns justify-content-around gap-3 flex-wrap">
                                                <button type="button" class="btn-sm btn btn-outline-danger">- 500</button>
                                                <button type="button" class="btn-sm btn btn-outline-danger">- 1000</button>
                                                <button type="button" class="btn-sm btn btn-outline-danger">- 2000</button>
                                                <button type="button" class="btn-sm btn btn-outline-danger">- 5000</button>
                                                <button type="button" class="btn-sm btn btn-outline-danger">- 10000</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <dl class="font-weight-bold text-bold">
                                            <dt style="font-size: 1.2rem">Balance: </dt>
                                            <dd id="invoiceFormBalanceText" style="font-weight: bold;font-size: 2rem">FCFA 0</dd>
                                            <dd id="invoiceFormBalanceDescription"></dd>
                                        </dl>
                                    </div>
                                </div>
                                <div class="modal-footer d-flex justify-content-center align-items-center">
                                    <button class="btn btn-print btn-success" type="submit"><i class="fa-solid fa-print"></i> Print</button>
                                    <button class="btn btn-primary" type="submit"><i class="fa-solid fa-save"></i> Save</button>
                                    <button data-dismiss="modal" class="btn btn-outline-danger" type="reset"><i class="fa-solid fa-cancel"></i> Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <form id="newClientForm" method="post">
                    <div class="modal fade" id="newClientModal" role="dialog">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title">Add a new Client</h4>
                                    <button type="reset" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group">
                                        <label for="newClientFirstName">First Name <span class="text-danger">*</span></label>
                                        <input required type="text" name="first_name" class="form-control" id="newClientFirstName" value="<%=data.newClientDto.first_name%>">
                                    </div>
                                    <div class="form-group">
                                        <label for="newClientLastName">Last Name</label>
                                        <input type="text" class="form-control" id="newClientLastName" name="last_name" value="<%= data.newClientDto.last_name %>">
                                    </div>
                                    <div class="form-group">
                                        <label for="newClientPhone">Phone Number <span class="text-danger">*</span></label>
                                        <input required type="text" class="form-control" id="newClientPhone" name="phone" value="<%= data.newClientDto.phone %>">
                                    </div>
                                    <div class="form-group">
                                        <label for="newClientEmail">Email</label>
                                        <input type="email" class="form-control" id="newClientEmail" name="email" value="<%= data.newClientDto.email %>">
                                    </div>
                                    <div class="form-group">
                                        <label for="newClientAddress">Address <span class="text-danger">*</span></label>
                                        <input required type="text" class="form-control" id="newClientAddress" name="address" value="<%= data.newClientDto.address %>">
                                    </div>
                                </div>
                                <div class="modal-footer d-flex justify-content-center">
                                    <button class="btn btn-primary mx-3" type="submit"><i class="fa-solid fa-save"></i> Save</button>
                                    <button class="btn btn-outline-danger mx-3" type="reset" data-dismiss="modal"><i class="fa-solid fa-cancel"></i> Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <form action="" method="post" id="new-order-form">
                    <main>
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-12">
                                    <div class="d-flex mb-4 justify-content-between align-items-center">
                                        <h1>
                                            <%= view.pageTitle %>
                                        </h1>
                                        <div class="d-flex gap-3">
                                            <div class="btn-group mx-2">
                                                <button class="btn btn-success" style="font-size: 20px;" type="submit"><i class="fa-solid fa-check"></i>
                                                    Create Invoice</button>
                                                <!-- <button class="btn btn-info" style="font-size: 20px;" type="submit">
                                                    <i class="fa-solid fa-save"></i> Save
                                                </button> -->
                                            </div>
                                            <button class="btn btn-danger" style="font-size: 20px;" type="reset">
                                                <i class="fa-solid fa-trash"></i> Discard
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <hr />
                                <div class="row w-100 justify-content-stretch align-items-stretch">
                                    <div class="col-6">
                                        <div class="card h-100">
                                            <div class="card-body p-3">
                                                <div class="row">
                                                    <div class="col-12">
                                                        <h4 class="text-muted card-title my-2">Products by Category
                                                        </h4>
                                                        <ul role="tablist" class="nav nav-pills categories-nav w-100 mb-2">
                                                            <li class="nav-item">
                                                                <a class="nav-link active" data-toggle="pill" role="tab" aria-controls="#all-products" aria-selected="true" href="#all-products">All</a>
                                                            </li>
                                                            <% data.categories.forEach(category=> {%>
                                                                <li class="nav-item">
                                                                    <a class="nav-link" data-toggle="pill" href="#CAT00<%= category.id %>">
                                                                        <%= category.name %>
                                                                    </a>
                                                                </li>
                                                                <%})%>
                                                        </ul>
                                                        <div id="product-tabs" class="tab-content">
                                                            <div class="tab-pane p-3 show fade in active border border-primary" id="all-products" style="max-height: 350px; overflow-y: auto;overflow-x: hidden">
                                                                <% data.products.forEach(product=> {%>
                                                                    <a data-product-id="<%= product.id %>" href="javascript:void(0)" class="overflow-hidden btn btn-outline-primary default mb-1 mr-1 addPct" style="color: black;width: 18.8%!important; border-top-width: 4px;height: 100px" id="ALL_PR00<%= product.id %>">
                                                                        <% if (product.iconUrl) { const
                                                                            icon=product.iconUrl;
                                                                            if(icon.split(':')[0]=='svg' ) { %>
                                                                            <img style="fill: var(--theme-color-1)" class="mt-1 mb-1" src="/static/icons/<%= icon.split(':')[1] %>" width="35%">
                                                                            <%} else {%>
                                                                                <i class="<%= icon.split(':')[1] %>" style="font-size: 35px"></i>
                                                                                <%} %>
                                                                                    <%} %>
                                                                                        <p class="card-text mb-2">
                                                                                            <%= product.name %>
                                                                                        </p>
                                                                                        <input name="selectedProduct" type="hidden" value="<%= product.id %>">
                                                                    </a>
                                                                    <%})%>
                                                            </div>
                                                            <% for(let i=0; i < data.categories.length; i++) { %>
                                                                <div style="max-height: 350px; overflow-y: auto;overflow-x: hidden" class="p-3 border border-primary tab-pane fade in" id="CAT00<%= data.categories[i].id%>">
                                                                    <% for(let j=0; j < data.products.length; j++) {
                                                                        if(data.products[j].categoryId
                                                                        !=data.categories[i].id) continue;%>
                                                                        <a data-product-id="<%= data.products[j].id %>" href="javascript:void(0)" class="btn btn-outline-primary default mb-1 mr-1 addPct overflow-hidden" style="color: black; width: 18.8%!important; border-top-width: 4px;height: 100px" id="PR00<%= data.products[j].id %>">
                                                                            <% if(data.products[j].iconUrl) { const
                                                                                icon=data.products[j].iconUrl;
                                                                                if(icon.split(':')[0]=='svg' ) {%>
                                                                                <img class="mt-1 mb-1" src="/static/icons/<%= icon.split(':')[1] %>" width="35%">
                                                                                <%} else {%>
                                                                                    <i class="<%= icon.split(':')[1] %>" style="font-size: 35px"></i>
                                                                                    <%}%>
                                                                                        <%}%>
                                                                                            <p class="card-text mb-2">
                                                                                                <%= data.products[j].name
                                                                                                    %>
                                                                                            </p>
                                                                                            <input name="selectedProduct" type="hidden" value="<%= data.products[j].id %>">
                                                                        </a>
                                                                        <%}%>
                                                                </div>
                                                                <%}%>
                                                        </div>

                                                        <div class="row my-3">
                                                            <div class="col-12">
                                                                <h4 class="text-muted card-title my-2">Services</h4>
                                                                <div class="service-container d-flex flex-wrap gap-3">
                                                                    <% for(let service of data.services ) {
                                                                        if(service.isAdditional) continue; 
                                                                        else{%>
                                                                        <button data-service-id="<%= service.id %>" type="button" class="btn mt-1 ml-1 btn-outline-primary">
                                                                            <%= service.name %>
                                                                        </button>
                                                                        <%}%>
                                                                            <%}%>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row my-4">
                                                            <div class="col-12">
                                                                <h4 class="text-muted card-title my-2">Additional Services
                                                                </h4>
                                                                <div class="additional-service-container d-flex flex-wrap gap-3">
                                                                    <% for(let service of data.services ) {
                                                                        if(!service.isAdditional) continue; 
                                                                        else{%>
                                                                        <button data-additional-service-id="<%= service.id %>" type="button" class="btn mt-1 ml-1 btn-outline-primary">
                                                                            <%= service.name %>
                                                                        </button>
                                                                        <%}%>
                                                                            <%}%>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <hr />
                                                        <div class="row my-4">
                                                            <div class="col-4">
                                                                <div class="form-group">
                                                                    <h4 class="text-muted card-title mb-1" for="entryQuantity">Quantity</h4>
                                                                    <div class="input-group">
                                                                        <div class="input-group-prepend">
                                                                            <button type="button" id="decrementQuantity" class="btn btn-primary">-</button>
                                                                        </div>
                                                                        <input type="number" min="1" value="1" max="100" class="form-control" id="entryQuantity">
                                                                        <div class="input-group-append">
                                                                            <button type="button" id="incrementQuantity" class="btn btn-primary">+</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-4">
                                                                <div class="form-group">
                                                                    <h4 class="text-muted card-title mb-1" for="entryColour">Colour</h4>
                                                                    <select id="color" name="color" class="form-control mb-4" data-width="100%" data-height="20%" required>
                                                                      <option value="Blanc" style="background-color: #ffffff;">Color
                                                                      </option>

                                                                      <option value="Extra Brite" style="background-color:#f1efef;">
                                                                        Extra
                                                                        Brite
                                                                      </option>
                                                                      <option value="background-color" style="background-color:#0937f1;">
                                                                      </option>
                                                                      <option value="Red" style="background-color:#fb092d;"> Red
                                                                      </option>
                                                                      <option value="Blue" style="background-color:#0937f1;"> Blue
                                                                      </option>
                                                                      <option value="Green" style="background-color:#10e044;">Green
                                                                      </option>
                                                                      <option value="Gray" style="background-color:#b6afaf;"> Gray
                                                                      </option>
                                                                      <option value="Black" style="background-color:#0a0000;"> Black
                                                                      </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-4">
                                                                <div class="form-group">
                                                                    <h4 class="text-muted card-title mb-1">Pricing Mode</h4>
                                                                    <select id="pricingModeInput" class="form-control">
                                                                        <option value="normal">NORMAL</option>
                                                                        <option value="fast">FAST</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row align-self-end">
                                                            <div class="col-12">
                                                                <button id="addEntryToCartButton" type="button" class="btn btn-primary w-100 d-block"><i class="fa-solid fa-plus"></i> Add</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- <div class="row my-2">
                                                    <div class="col-6">
                                                        <h4 class="text-muted card-title p-0 mt-4 mb-2">Quantity</h4>
                                                        <div class="form-group">
                                                            <input class="form-control" step="1" max="100" type="number" min="1">
                                                        </div>
                                                    </div>
                                                </div> -->
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="card">
                                            <div class="card-body">
                                                <h4 class="text-muted card-title">Billing</h4>
                                                <div class="form-group my-2">
                                                    <select name="orderFind" id="orderFind" class="form-control w-100 select2" style="width: 100%;display: block">
                                                    <option value="">Find an order to update</option>
                                                  </select>
                                                </div>
                                                <hr />
                                                <div class="form-group p-0 my-1">
                                                    <div class="input-group">
                                                        <select required name="clientId" type="text" id="clientsearch" class="form-control" placeholder="Find a client" style="font-size: 15px;">
                                                            <option value="">Select a client</option>
                                                            <% for(let client of data.clients) {%>
                                                                <option data-client-name="<%= `${client.first_name} ${client.last_name || ''
                                                            }`.trim() %>" data-client-id="<%=client.id%>"
                                                                    value="<%= client.id %>">
                                                                    <%= `${client.first_name} ${client.last_name || ''
                                                                        }`.trim() %>
                                                                </option>
                                                                <%} %>
                                                        </select>
                                                        <div class="input-group-append">
                                                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#newClientModal">
                                                                <i class="simple-icon-user-follow"></i> Add a new Client
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <table id="entries-table" class="table table-hover table-striped table-bordered my-2">
                                                    <thead>
                                                        <tr>
                                                            <th>Selected Product</th>
                                                            <th>Quantity</th>
                                                            <th>Service</th>
                                                            <th>Additional Services</th>
                                                            <!-- <th>Price Mode</th> -->
                                                            <th>Price</th>
                                                            <th></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="billing-table-body" style="max-height: 500px; overflow-x: hidden; overflow-y: auto">
                                                    </tbody>
                                                </table>

                                                <table class="table mt-3 w-100">
                                                    <tr class="d-flex align-items-center">
                                                        <td>Tax</td>
                                                        <td class="w-100">
                                                            <input value="0" type="number" min="0" id="taxInput" name="tax" class="form-control"></td>
                                                    </tr>

                                                    <tr class="d-flex align-items-center">
                                                        <td>Discount</td>
                                                        <td class="w-100">
                                                            <input value="0" type="number" min="0" name="discount" id="discountInput" class="form-control">
                                                        </td>
                                                    </tr>

                                                    <tr class="d-flex align-items-center">
                                                        <td>Total</td>
                                                        <td class="w-100"><span id="total" class="text-bold" style="font-size: 1.5rem">0</span>
                                                        </td>
                                                    </tr>
                                                    <tr class="d-flex align-items-center">
                                                        <td>Net Payable</td>
                                                        <td class="w-100"><span id="net-payable" class="text-bold" style="font-size: 2rem">0</span></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        </div>
                        </div>
                        </div>
                        </div>
                    </main>
                </form>
                <%- include('../../partials/main-footer.ejs') %>
                    <%- include('partials/scripts.ejs') %>
    </body>

    </html>